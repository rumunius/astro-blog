diff --git a/node_modules/astro-pure/components/basic/Header.astro b/node_modules/astro-pure/components/basic/Header.astro
index afa2d01..a029cc7 100644
--- a/node_modules/astro-pure/components/basic/Header.astro
+++ b/node_modules/astro-pure/components/basic/Header.astro
@@ -98,7 +98,7 @@ import { Icon } from '../user'
         // document.dispatchEvent(toggleDarkModeEvent)
         const newTheme = setTheme(undefined, true)
         darkModeBtn.dataset.theme = newTheme
-        showToast({ message: `Set theme to ${newTheme}` })
+        showToast({ message: `已将主题设置为 ${newTheme}` })
       })
 
       // Menu
diff --git a/node_modules/astro-pure/components/pages/BackToTop.astro b/node_modules/astro-pure/components/pages/BackToTop.astro
index 492983d..bbe9384 100644
--- a/node_modules/astro-pure/components/pages/BackToTop.astro
+++ b/node_modules/astro-pure/components/pages/BackToTop.astro
@@ -65,7 +65,7 @@ const { header: headerName, content: contentName, needPercent = true } = Astro.p
       scrollPercentEl.innerText = scrollPercent.toString()
 
       // If percent is 100, percent won't need to show
-      actionBtns.classList.toggle('ended', scrollPercent > 100)
+      actionBtns.classList.toggle('ended', scrollPercent > 100 || scrollPercent < 0)
     })
   } else {
     actionBtns.classList.add('ended')
diff --git a/node_modules/astro-pure/components/pages/TOC.astro b/node_modules/astro-pure/components/pages/TOC.astro
index 421842d..3ed8b27 100644
--- a/node_modules/astro-pure/components/pages/TOC.astro
+++ b/node_modules/astro-pure/components/pages/TOC.astro
@@ -48,7 +48,7 @@ const toc = generateToc(headings)
 
       // Initialize the headings and tocLinks
       this.headings = Array.from(
-        document.querySelectorAll('article h2, article h3, article h4, article h5, article h6')
+        document.querySelectorAll('article h1, article h2, article h3, article h4')
       )
       this.tocLinks = Array.from(this.querySelectorAll('a[href^="#"]')).map((link) => ({
         element: link as HTMLAnchorElement,
@@ -76,8 +76,8 @@ const toc = generateToc(headings)
       })
 
       this.tocLinks.forEach(({ element: el, progressBar: bar, slug }, i) => {
-        const { inView, progress } = this.headingProgress[slug]
         if (this.headingProgress[slug]) {
+          const { inView, progress } = this.headingProgress[slug]
           el.classList.toggle('highlight', inView)
           el.classList.toggle('highlight-bg-translucent', inView)
           el.classList.toggle(
diff --git a/node_modules/astro-pure/components/pages/TOCHeading.astro b/node_modules/astro-pure/components/pages/TOCHeading.astro
index 0090994..bb59b4b 100644
--- a/node_modules/astro-pure/components/pages/TOCHeading.astro
+++ b/node_modules/astro-pure/components/pages/TOCHeading.astro
@@ -22,7 +22,9 @@ const text = rawText.endsWith('#') ? rawText.slice(0, -1) : rawText
       aria-label={`Scroll to section: ${text}`}
       class={cn(
         'toc-item line-clamp-2 px-3 py-1 ms-2 text-foreground/75 transition-all hover:text-foreground [&.highlight]:font-medium [&.highlight]:text-primary [&.is-read]:text-input [&.highlight-bg-translucent]:bg-muted',
-        depth > 2 && 'ps-7'
+        depth === 2 && 'ps-5',
+        depth === 3 && 'ps-8',
+        depth >= 4 && 'ps-11'
       )}
       href={`#${slug}`}>{text}</a
     >
diff --git a/node_modules/astro-pure/components/user/Card.astro b/node_modules/astro-pure/components/user/Card.astro
index 3b30aee..233a2e2 100644
--- a/node_modules/astro-pure/components/user/Card.astro
+++ b/node_modules/astro-pure/components/user/Card.astro
@@ -23,9 +23,9 @@ const { as: Tag = 'div', class: className, href, heading, subheading, date } = A
 >
   <div class='flex flex-col gap-y-1.5'>
     <div class='flex flex-col gap-y-0.5'>
-      <h2 class='text-lg font-medium'>{heading}</h2>
-      <p class='text-muted-foreground'>{subheading}</p>
-      <p class='text-muted-foreground'>{date}</p>
+      <h2 class='text-lg font-medium z-10'>{heading}</h2>
+      <p class='text-muted-foreground z-10'>{subheading}</p>
+      <p class='text-muted-foreground z-10'>{date}</p>
     </div>
     <slot />
   </div>
diff --git a/node_modules/astro-pure/plugins/toc.ts b/node_modules/astro-pure/plugins/toc.ts
index 2609983..0e493dd 100644
--- a/node_modules/astro-pure/plugins/toc.ts
+++ b/node_modules/astro-pure/plugins/toc.ts
@@ -14,19 +14,24 @@ function diveChildren(item: TocItem, depth: number): TocItem[] {
 }
 
 export function generateToc(headings: readonly MarkdownHeading[]) {
-  // this ignores/filters out h1 element(s)
-  const bodyHeadings = [...headings.filter(({ depth }) => depth > 1)]
+  // include all headings including h1 element(s)
+  const bodyHeadings = [...headings.filter(({ depth }) => depth > 0 && depth < 5)]
   const toc: TocItem[] = []
 
+  // Find the minimum depth to use as top level
+  const minDepth = bodyHeadings.length > 0 
+    ? Math.min(...bodyHeadings.map(h => h.depth))
+    : 1
+
   bodyHeadings.forEach((h) => {
     const heading: TocItem = { ...h, subheadings: [] }
 
-    // add h2 elements into the top level
-    if (heading.depth === 2) {
+    // add headings with minimum depth into the top level
+    if (heading.depth === minDepth) {
       toc.push(heading)
     } else {
-      const lastItemInToc = toc[toc.length - 1]!
-      if (heading.depth < lastItemInToc.depth) {
+      const lastItemInToc = toc[toc.length - 1]
+      if (!lastItemInToc || heading.depth < lastItemInToc.depth) {
         throw new Error(`Orphan heading found: ${heading.text}.`)
       }
 
diff --git a/node_modules/astro-pure/utils/theme.ts b/node_modules/astro-pure/utils/theme.ts
index 3f8dda3..03572fd 100644
--- a/node_modules/astro-pure/utils/theme.ts
+++ b/node_modules/astro-pure/utils/theme.ts
@@ -34,7 +34,17 @@ export function setTheme(theme?: string, save = false) {
   document.documentElement.classList.toggle('dark', targetTheme === 'dark')
   document
     .querySelector('meta[name="theme-color"]')
-    ?.setAttribute('content', targetTheme === 'dark' ? '#0B0B10' : '#FCFCFD')
-
+      ?.setAttribute('content', targetTheme === 'dark' ? '#0B0B10' : '#FCFCFD')
+  //giscus theme change
+    function sendMessage(message: Object) {
+    const iframe = document.querySelector(
+      "iframe.giscus-frame"
+    ) as HTMLIFrameElement;
+    if (!iframe || !iframe.contentWindow) return;
+    iframe.contentWindow.postMessage({ giscus: message }, "https://giscus.app");
+  }
+    sendMessage({
+      setConfig: { theme: targetTheme == "light" ? "light" : "dark_dimmed" },
+    });
   return theme
 }
